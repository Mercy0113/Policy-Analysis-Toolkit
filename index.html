<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>政策分析工具箱 - Mercy0113</title>
    <!-- 引入样式和库 -->
    <link href="https://github.com/Mercy0113/Policy-Analysis-Toolkit/raw/main/libs/bootstrap.min.css" rel="stylesheet">
    <script src="https://github.com/Mercy0113/Policy-Analysis-Toolkit/raw/main/libs/echarts.min.js"></script>
    <style>
        .tool-card {
            transition: transform 0.3s;
            border: 1px solid #e0e0e0;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        #policyChart {
            height: 400px;
            margin: 20px 0;
        }

        .keyword-tag {
            background: #f0f9ff;
            border: 1px solid #4da8ff;
        }

        /* 新增时效提醒样式 */
        .deadline-card {
            background: #fff8f8;
            border-left: 4px solid #ff6b6b;
        }

        .urgent {
            background-color: #ffebee !important;
        }

        .warning {
            background-color: #fff3e0 !important;
        }

        .normal {
            background-color: #e8f5e9 !important;
        }

        .countdown-badge {
            font-size: 0.9em;
            padding: 4px 8px;
            border-radius: 12px;
        }
    </style>
</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">政策分析工具箱</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="#database">政策库</a></li>
                    <li class="nav-item"><a class="nav-link" href="#monitor">舆情监测</a></li>
                    <li class="nav-item"><a class="nav-link" href="#tools">分析工具</a></li>
                    <li class="nav-item"><a class="nav-link" href="#deadline">时效提醒</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 核心功能模块 -->
    <div class="container my-5">
        <!-- 政策数据库模块 -->
        <section id="database" class="mb-5">
            <h2 class="mb-4">📚 政策数据库</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <h5>政策检索系统</h5>
                            <div class="mb-3">
                                <input type="text" class="form-control" id="searchInput" placeholder="输入政策关键词">
                            </div>
                            <div id="searchResults" class="list-group">
                                <!-- 动态加载政策条目 -->
                                <div class="list-group-item">示例政策1：数字经济十四五规划</div>
                                <div class="list-group-item">示例政策2：碳中和行动方案</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <h5 class="card-title">📈 政策趋势分析</h5>
                            <div id="policyChart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 舆情监测模块 -->
        <section id="monitor" class="mb-5">
            <h2 class="mb-4">🔍 舆情监测中心</h2>
            <div class="row g-4">
                <div class="col-md-6">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <h5>监测模板配置</h5>
                            <form id="monitorForm">
                                <div class="mb-3">
                                    <label>监测关键词</label>
                                    <div id="keywordContainer">
                                        <span class="badge keyword-tag me-1">数字经济</span>
                                    </div>
                                    <input type="text" class="form-control mt-2" id="newKeyword">
                                    <button type="button" class="btn btn-sm btn-secondary mt-2" onclick="addKeyword()">
                                        添加关键词</button>
                                </div>
                                <button type="submit" class="btn btn-primary">启动监测</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <h5>实时舆情概览</h5>
                            <ul id="publicOpinionList" class="list-group">
                                <li class="list-group-item">监测到 123 条"数字经济"相关信息</li>
                                <li class="list-group-item">检测到 45 条政策关联讨论</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 分析工具模块 -->
        <section id="tools">
            <h2 class="mb-4">🛠️ 分析工具集</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <h5>政策解读模板</h5>
                            <textarea class="form-control" rows="5" placeholder="粘贴政策原文..."></textarea>
                            <button class="btn btn-primary mt-2">生成解读报告</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <h5>影响评估模型</h5>
                            <input type="number" class="form-control mb-2" placeholder="受影响人口">
                            <input type="number" class="form-control mb-2" placeholder="财政投入">
                            <button class="btn btn-primary">计算影响指数</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <h5>数据可视化</h5>
                            <select class="form-select mb-2">
                                <option>选择图表类型</option>
                                <option>柱状图</option>
                                <option>折线图</option>
                            </select>
                            <button class="btn btn-primary">生成图表</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 新增时效提醒模块 -->
        <section id="deadline" class="mb-5">
            <h2 class="mb-4">⏰ 政策时效提醒</h2>
            <div class="row g-4">
                <div class="col-12">
                    <div class="card tool-card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between mb-3">
                                <h5>即将到期政策清单</h5>
                                <select class="form-select w-25" id="filterSelect" onchange="filterDeadlines()">
                                    <option value="all">全部</option>
                                    <option value="urgent">本周到期</option>
                                    <option value="warning">本月到期</option>
                                </select>
                            </div>
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>政策名称</th>
                                        <th>截止日期</th>
                                        <th>剩余天数</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="deadlineList">
                                    <!-- 动态生成提醒内容 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="https://github.com/Mercy0113/Policy-Analysis-Toolkit/raw/main/libs/bootstrap.bundle.min.js"></script>
    <script>
        // 舆情关键词管理
        function addKeyword() {
            const keyword = document.getElementById('newKeyword').value;
            if (keyword) {
                const tag = document.createElement('span');
                tag.className = 'badge keyword-tag me-1';
                tag.textContent = keyword;
                document.getElementById('keywordContainer').appendChild(tag);
            }
        }

        // 时效提醒过滤功能
        function filterDeadlines() {
            const filter = document.getElementById('filterSelect').value;
            const allRows = document.querySelectorAll('#deadlineList tr');
            allRows.forEach(row => {
                if (filter === 'all') {
                    row.style.display = '';
                } else if (filter === 'urgent' && row.dataset.deadline <= 7) {
                    row.style.display = '';
                } else if (filter === 'warning' && row.dataset.deadline > 7 && row.dataset.deadline <= 30) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
    </script>
    // 动态加载 ECharts，优先使用本地文件，失败后使用 CDN
    function loadECharts(callback) {
        var script = document.createElement('script');
        script.src = 'libs/echarts.min.js';  // 本地 ECharts 文件
        script.onload = callback;
        script.onerror = function () {
            console.warn('本地 ECharts 加载失败，尝试使用 CDN...');
            var cdnScript = document.createElement('script');
            cdnScript.src = 'https://cdn.jsdelivr.net/npm/echarts@5.4.1/dist/echarts.min.js';
            cdnScript.onload = callback;
            document.body.appendChild(cdnScript);
        };
        document.body.appendChild(script);
    }

    // 初始化 ECharts 图表
    function initChart() {
        if (typeof echarts !== 'undefined') {
            var chart = echarts.init(document.getElementById('chart'));
            var option = {
                title: { text: '示例图表' },
                tooltip: {},
                xAxis: { data: ['A', 'B', 'C', 'D', 'E'] },
                yAxis: {},
                series: [{ type: 'bar', data: [5, 20, 36, 10, 10] }]
            };
            chart.setOption(option);
        } else {
            console.error('ECharts 加载失败！');
        }
    }

    // 执行加载
    loadECharts(initChart);
</script>
</body>

</html>
